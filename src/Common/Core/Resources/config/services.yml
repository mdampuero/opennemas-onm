parameters:
    core.locale.available: [ 'en_US', 'es_ES', 'gl_ES' ]
    core.locale.path:      '%kernel.root_dir%/Resources/locale'
    core.maintenance.file: '%kernel.root_dir%/../.maintenance'
    core.template.filters:
        output:
            - meta_amphtml
            - noindex
            - canonical_url
            - ads_generator
            - ads_scripts
            - adsense_validator
            - comscore
            - chartbeat
            - cmp_script
            - google_tags_manager
            - css_includes
            - generate_fb_admin_tag
            - generate_fb_pages_tag
            - google_analytics
            - js_includes
            - ojd
            - piwik
    core.template.admin.filters:
        output:
            - css_includes
            - js_includes
            - backend_analytics
            - trimwhitespace
        ignore_cli:
            - backend_analytics
    core.template.manager.filters:
        output:
            - css_includes
            - js_includes
    core.helper.comment.default_params:
        disable_comments: false
        with_comments: true
        number_elements: 10
        moderation_manual: true
        moderation_autoreject: false
        moderation_autoaccept: false

services:
    core.collector.brand:
        class: Common\Core\Component\Collector\BrandCollector
        public: false
        arguments: [ '%kernel.root_dir%' ]
        tags:
            -
                name:     data_collector
                id:       'core.collector.brand'
                template: '@Core/collector/brand.html.twig'
                priority: 2000

    core.dispatcher:
        class:     Common\Core\Component\EventDispatcher\EventDispatcher
        arguments: [ '@event_dispatcher' ]

    core.geo:
        class:     Common\Core\Component\Geo\Geo
        arguments: [ '@core.locale' ]

    core.helper.advertisement:
        class:     Common\Core\Component\Helper\AdvertisementHelper
        arguments: [ '@service_container' ]

    core.helper.comment:
        class:     Common\Core\Component\Helper\CommentHelper
        arguments:
            - '@orm.manager'
            - '%core.helper.comment.default_params%'

    core.helper.checkout:
        class:     Common\Core\Component\Helper\CheckoutHelper
        arguments: [ '@service_container' ]

    core.helper.content_media:
        class:     Common\Core\Component\Helper\ContentMediaHelper
        arguments: [ '@orm.manager', '@entity_repository' ]

    core.helper.csv:
        class:     Common\Core\Component\Helper\CsvHelper

    core.helper.http_fetcher:
        class:     Common\Core\Component\Http\Fetcher

    core.helper.instance_sync:
        class:     Common\Core\Component\Helper\InstanceSyncHelper
        arguments: [ '@service_container' ]

    core.helper.l10n_route:
        class:     Common\Core\Component\Helper\L10nRouteHelper
        arguments: [ '@service_container' ]

    core.helper.newsletter:
        class:     Common\Core\Component\Helper\NewsletterHelper
        arguments:
            - '@orm.manager'

    core.helper.newsletter_sender:
        class:     Common\Core\Component\Helper\NewsletterSenderHelper
        arguments:
            - '@orm.manager'
            - '@error.log'
            - '@application.log'
            - '@core.instance'
            - '@mailer'
            - '@api.service.subscriber'
            - '@external.act_on.factory'
            - '@api.service.newsletter'
            - '%mailer_no_reply_address%'

    core.helper.oql:
        class:     Common\Core\Component\Helper\OqlHelper
        arguments: [ '@service_container' ]

    core.helper.structured_data:
        class:     Common\Core\Component\Helper\StructuredData
        arguments: [ '@orm.manager', '@api.service.tag' ]

    core.helper.subscription:
        class:     Common\Core\Component\Helper\SubscriptionHelper
        arguments: [ '@core.security', '@api.service.subscription' ]

    core.helper.url:
        class:     Common\Core\Component\Helper\UrlHelper

    core.helper.url_generator:
        class:     Common\Core\Component\Helper\UrlGeneratorHelper
        arguments: [ '@service_container' ]

    core.helper.user:
        class:     Common\Core\Component\Helper\UserHelper
        arguments: [ '@service_container' ]

    core.image.image:
        class:     Common\Core\Component\Image\ImageManager

    core.instance:
        class:     Common\ORM\Entity\Instance
        factory:   [ '@core.loader', 'getInstance' ]

    core.recaptcha:
        class:     Common\Core\Component\Security\Recaptcha\Recaptcha
        arguments: [ '@service_container' ]

    core.redirector:
        class:     Common\Core\Component\Routing\Redirector
        arguments: [ '@service_container', '@api.service.url', '@cache.connection.instance' ]

    core.instance.checker:
        class:     Common\Core\Component\Instance\Checker
        arguments: [ '@orm.manager' ]

    core.instance.validator:
        class:     Common\Core\Component\Instance\Validator
        arguments: [ '@orm.manager' ]

    backend.listener.access_denied.exception:
        class:     Common\Core\EventListener\AccessDeniedExceptionListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException, priority: 100 }

    core.listener.controller:
        class:     Common\Core\EventListener\ControllerListener
        arguments: [ '@core.globals', '@core.locale' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController, priority: 0 }

    core.listener.core:
        class:     Common\Core\EventListener\CoreListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 99 }

    core.listener.locale:
        class:     Common\Core\EventListener\LocaleListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 0 }

    core.listener.maintenance:
        class:     Common\Core\EventListener\MaintenanceListener
        arguments: [ '%core.maintenance.file%' ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 100 }

    core.listener.response:
        class:     Common\Core\EventListener\ResponseListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.view, method: onKernelView, priority: 0 }

    core.listener.security:
        class:     Common\Core\EventListener\SecurityListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 5 }

    core.listener.security.annotation:
        class:     Common\Core\EventListener\SecurityAnnotationListener
        arguments: [ '@annotation_reader', '@core.security' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController, priority: 0 }

    core.listener.bot_detector.annotation:
        class:     Common\Core\EventListener\BotDetectorAnnotationListener
        arguments: [ '@annotation_reader', '@router' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController, priority: 0 }

    kernel.listener.bot_detector.exception:
        class: Common\Core\EventListener\BotDetectorExceptionListener
        arguments: [ '@router' ]
        tags:
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException, priority: 100 }

    core.listener.template.annotation:
        class:     Common\Core\EventListener\TemplateAnnotationListener
        arguments: [ '@service_container' ]
        tags:
            - { name: kernel.event_listener, event: kernel.controller, method: onKernelController }

    core.loader:
        class:     Common\Core\Component\Loader\Loader
        arguments: [ '@service_container' ]

    core.locale:
        class:     Common\Core\Component\Locale\Locale
        arguments: [ '%core.locale.available%', '%core.locale.path%' ]

    core.renderer.advertisement:
        class:     Common\Core\Component\Renderer\AdvertisementRenderer
        arguments: [ '@service_container' ]

    core.renderer.newsletter:
        class:     Common\Core\Component\Renderer\NewsletterRenderer
        arguments:
            - '@core.template'
            - '@entity_repository'
            - '@category_repository'
            - '@api.service.author'
            - '@orm.manager'
            - '@core.helper.advertisement'
            - '@advertisement_repository'
            - '@core.instance'

    core.status.checker:
        class:     Common\Core\Component\Status\Checker
        arguments: [ '@service_container' ]

    core.security:
        class:     Common\Core\Component\Security\Security

    core.security.authentication:
        class:     Common\Core\Component\Security\Authentication\Authentication
        arguments: [ '@service_container' ]

    core.security.authentication.success:
        class:     Common\Core\Component\Security\Authentication\AuthenticationSuccessHandler
        arguments: [ '@core.security.authentication', '@application.log', '@router', '@security.token_storage' ]

    core.security.authentication.failure:
        class:     Common\Core\Component\Security\Authentication\AuthenticationFailureHandler
        arguments: [ '@core.security.authentication', '@application.log', '@router' ]

    core.security.authentication.oauth.success:
        class:     Common\Core\Component\Security\Authentication\OAuthAuthenticationSuccessHandler
        arguments: [ '@service_container' ]

    core.security.encoder.password:
        class:     Common\Core\Component\Security\Encoder\PasswordEncoder

    core.security.http.logout.failure:
        class:     Common\Core\Component\Security\Http\Logout\LogoutSuccessHandler
        arguments: [ '@router' ]

    core.security.user:
        class:     Common\ORM\Entity\User
        factory:   [ '@core.security', 'getUser' ]

    core.security.user.provider:
        class:     Common\Core\Component\Security\User\UserProvider
        arguments: [ '@orm.manager', [ 'instance', 'manager' ] ]

    core.subscriber.redirector:
        class: Common\Core\EventSubscriber\RedirectorSubscriber
        arguments: [ '@cache.connection.instance', '@core.instance' ]
        tags:
            - { name: kernel.event_subscriber }

    core.security.user.oauth_provider:
        class:     Common\Core\Component\Security\User\OAuthUserProvider
        arguments: [ '@orm.manager', '@security.token_storage', [ 'instance', 'manager' ] ]

    core.template:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.filters%' ]

    core.globals:
        class:     Common\Core\Component\Core\GlobalVariables
        arguments: [ '@service_container' ]

    core.template.admin:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.admin.filters%' ]

    core.template.manager:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.manager.filters%' ]

    core.theme:
        class:     Common\ORM\Entity\Extension
        factory:   [ '@core.loader', 'getTheme' ]

    core.factory.translator:
        class:     Common\Core\Component\Translator\TranslatorFactory

    core.user:
        alias:     'core.security.user'

    core.validator:
        class:      Common\Core\Component\Validator\Validator
        arguments:
            - '@orm.manager'
            - '@validator'
