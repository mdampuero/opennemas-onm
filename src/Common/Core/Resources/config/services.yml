imports:
    - { resource: services/helper.yml }
    - { resource: services/listener.yml }
    - { resource: services/subscriber.yml }
parameters:
    core.locale.available: [ 'en_US', 'es_ES', 'ca_ES', 'gl_ES' ]
    core.locale.path:      '%kernel.root_dir%/Resources/locale'
    core.maintenance.file: '%kernel.root_dir%/../.maintenance'
    core.template.filters:
        output:
            - meta_amphtml
            - noindex
            - canonical_url
            - ads_generator
            - ads_scripts
            - adsense_validator
            - browser_update
            - comscore
            - chartbeat
            - cmp_script
            - google_tags_manager
            - css_includes
            - generate_fb_admin_tag
            - generate_fb_pages_tag
            - google_analytics
            - js_includes
            - ojd
            - piwik
    core.template.admin.filters:
        output:
            - css_includes
            - js_includes
            - backend_analytics
            - browser_update
            - trimwhitespace
        ignore_cli:
            - backend_analytics
    core.template.manager.filters:
        output:
            - css_includes
            - js_includes
            - browser_update
services:
    core.collector.brand:
        class:     Common\Core\Component\Collector\BrandCollector
        public:    false
        arguments: [ '%kernel.root_dir%' ]
        tags:
            -
                name:     data_collector
                id:       'core.collector.brand'
                template: '@Core/collector/brand.html.twig'
                priority: 2000

    core.dispatcher:
        class:     Common\Core\Component\EventDispatcher\EventDispatcher
        arguments: [ '@event_dispatcher' ]
        public:    true

    core.factory.translator:
        class:     Common\Core\Component\Translator\TranslatorFactory
        public:    true

    core.geo:
        class:     Common\Core\Component\Geo\Geo
        arguments: [ '@core.locale' ]
        public:    true

    core.globals:
        class:     Common\Core\Component\Core\GlobalVariables
        arguments: [ '@service_container' ]
        public:    true

    core.image.processor:
        class:     Common\Core\Component\Image\Processor
        public:    true

    core.instance:
        class:     Common\ORM\Entity\Instance
        factory:   [ '@core.loader', 'getInstance' ]
        public:    true

    core.instance.checker:
        class:     Common\Core\Component\Instance\Checker
        arguments: [ '@orm.manager' ]
        public:    true

    core.instance.validator:
        class:     Common\Core\Component\Instance\Validator
        arguments: [ '@orm.manager' ]
        public:    true

    core.loader:
        class:     Common\Core\Component\Loader\Loader
        arguments: [ '@service_container' ]
        public:    true

    core.locale:
        class:     Common\Core\Component\Locale\Locale
        arguments: [ '%core.locale.available%', '%core.locale.path%' ]
        public:    true

    core.renderer.advertisement:
        class:     Common\Core\Component\Renderer\AdvertisementRenderer
        arguments: [ '@service_container' ]
        public:    true

    core.renderer.newsletter:
        class:     Common\Core\Component\Renderer\NewsletterRenderer
        arguments:
            - '@core.template'
            - '@entity_repository'
            - '@api.service.author'
            - '@orm.manager'
            - '@core.helper.advertisement'
            - '@advertisement_repository'
            - '@core.instance'
        public:    true

    core.recaptcha:
        class:     Common\Core\Component\Security\Recaptcha\Recaptcha
        arguments: [ '@service_container' ]
        public:    true

    core.redirector:
        class:     Common\Core\Component\Routing\Redirector
        arguments: [ '@service_container', '@api.service.url', '@cache.connection.instance' ]
        public:    true

    core.status.checker:
        class:     Common\Core\Component\Status\Checker
        arguments: [ '@service_container' ]
        public:    true

    core.security:
        class:     Common\Core\Component\Security\Security
        public:    true

    core.security.authentication:
        class:     Common\Core\Component\Security\Authentication\Authentication
        arguments: [ '@service_container' ]
        public:    true

    core.security.authentication.success:
        class:     Common\Core\Component\Security\Authentication\AuthenticationSuccessHandler
        arguments: [ '@core.security.authentication', '@application.log', '@router', '@security.token_storage' ]
        public:    true

    core.security.authentication.failure:
        class:     Common\Core\Component\Security\Authentication\AuthenticationFailureHandler
        arguments: [ '@core.security.authentication', '@application.log', '@router' ]
        public:    true

    core.security.authentication.oauth.success:
        class:     Common\Core\Component\Security\Authentication\OAuthAuthenticationSuccessHandler
        arguments: [ '@service_container' ]
        public:    true

    core.security.encoder.password:
        class:     Common\Core\Component\Security\Encoder\PasswordEncoder
        public:    true

    core.security.http.logout.failure:
        class:     Common\Core\Component\Security\Http\Logout\LogoutSuccessHandler
        arguments: [ '@router' ]
        public:    true

    core.security.user:
        class:   Common\ORM\Entity\User
        factory: [ '@core.security', 'getUser' ]
        public:  true

    core.security.user.provider:
        class:     Common\Core\Component\Security\User\UserProvider
        arguments: [ '@orm.manager', [ 'instance', 'manager' ] ]
        public:    true

    core.security.user.oauth_provider:
        class:     Common\Core\Component\Security\User\OAuthUserProvider
        arguments: [ '@orm.manager', '@security.token_storage', [ 'instance', 'manager' ] ]
        public:    true

    core.template:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.filters%' ]
        public:    true

    core.template.admin:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.admin.filters%' ]
        public:    true

    core.template.cache:
        class:     Common\Core\Component\Template\Cache\CacheManager
        arguments: [ '@onm_templating' ]
        public:    true

    core.template.manager:
        class:     Common\Core\Component\Template\Template
        arguments: [ '@service_container', '%core.template.manager.filters%' ]
        public:    true

    core.theme:
        class:     Common\ORM\Entity\Extension
        factory:   [ '@core.loader', 'getTheme' ]
        public:    true

    core.user:
        alias:     'core.security.user'
        public:    true

    core.validator:
        class:      Common\Core\Component\Validator\Validator
        arguments: [ '@orm.manager', '@validator', '@core.helper.comment' ]
        public:    true
