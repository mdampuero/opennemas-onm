parameters:
    orm.config_path: %kernel.root_dir%/../src/Common/ORM/Resources/config/orm

services:
    orm.loader:
        class: Common\ORM\Core\Loader\Loader
        arguments: [ '%orm.config_path%', '%kernel.environment%', '%orm.default%', '@cache.manager' ]

    orm.manager:
        class: Common\ORM\Core\EntityManager
        arguments: [ '@service_container' ]

    # TODO: Remove when models use new ORM
    orm.connection.instance:
        class:     Common\ORM\Core\Connection
        factory:   [ '@orm.manager', 'getConnection' ]
        arguments: [ 'instance' ]
