orm:
    metadata:
        -
            name:  Content
            class: Common\Model\Entity\Content
            enum:
                content_type_name:
                    - advertisement
                    - album
                    - article
                    - attachment
                    - company
                    - event
                    - kiosko
                    - letter
                    - obituary
                    - opinion
                    - photo
                    - poll
                    - static_page
                    - video
                    - widget
            properties:
                available:            boolean
                body:                 l10n_string
                changed:              datetime
                content_status:       integer
                content_type_name:    enum
                created:              datetime
                description:          l10n_string
                endtime:              datetime
                favorite:             boolean
                fk_author:            integer
                fk_content_type:      integer
                fk_publisher:         integer
                fk_user_last_editor:  integer
                frontpage:            integer
                information:          array
                in_home:              boolean
                in_litter:            boolean
                items:                array
                params:               array
                pk_content:           integer
                position:             integer
                slug:                 l10n_string
                starttime:            datetime
                coverage_start_time:  string
                coverage_end_time:    string
                title:                l10n_string
                urn_source:           string
                with_comment:         boolean
                showcase:             boolean
                categories:           array
                live_blog_posting:    boolean
                live_blog_updates:    array
                webpush_notifications: array
                tags:                 array
                related_contents:     array
                subscriptions:        array
                timetable:            array
                title_int:            l10n_string
                pretitle:             l10n_string
            converters:
                default:
                    class:     Common\Model\Database\Data\Converter\ContentConverter
                    arguments: [ '@orm.metadata.content' ]
            repositories:
                instance:
                    class:     Opennemas\Orm\Database\Repository\BaseRepository
                    arguments: [ '@orm.connection.instance', '@orm.metadata.content', '@cache.connection.instance' ]
            persisters:
                instance:
                    class:     Common\Model\Database\Persister\ContentPersister
                    arguments: [ '@orm.connection.instance', '@orm.metadata.content', '@cache.connection.instance' ]
            mapping:
                database:
                    table: contents
                    metas:
                        table: contentmeta
                        ids:
                            pk_content: fk_content
                        key: meta_name
                    relations:
                        categories:
                            table: content_category
                            source_key: pk_content
                            target_key: content_id
                            return_fields: category_id
                            columns:
                                content_id:
                                    type: integer
                                category_id:
                                    type: integer
                        related_contents:
                            table:      content_content
                            source_key: pk_content
                            target_key: source_id
                            columns:
                                source_id:
                                    type: integer
                                target_id:
                                    type: integer
                                type:
                                    type: string
                                content_type_name:
                                    type: string
                                caption:
                                    type: string
                                position:
                                    type: integer
                        tags:
                            table: contents_tags
                            source_key: pk_content
                            target_key: content_id
                            return_fields: tag_id
                            columns:
                                content_id:
                                    type: integer
                                tag_id:
                                    type: integer
                        webpush_notifications:
                            table: content_notifications
                            source_key: pk_content
                            target_key: fk_content
                            columns:
                                id:
                                    type: integer
                                fk_content:
                                    type: integer
                                transaction_id:
                                    type: string
                                impressions:
                                    type: integer
                                clicks:
                                    type: integer
                                closed:
                                    type: integer
                                status    :
                                    type: integer
                                body:
                                    type: string
                                title:
                                    type: string
                                send_date:
                                    type: datetime
                                image:
                                    type: integer
                        live_blog_updates:
                            table: content_updates
                            source_key: pk_content
                            target_key: content_id
                            columns:
                                content_id:
                                    type: integer
                                title:
                                    type: string
                                body:
                                    type: string
                                caption:
                                    type: string
                                image_id:
                                    type: integer
                                created:
                                    type: datetime
                                modified:
                                    type: datetime
                    columns:
                        pk_content:
                            type: bigint
                            options: { default: null, unsigned: true, autoincrement: true }
                        fk_content_type:
                            type: integer
                            options: { default: null, unsigned: true }
                        content_type_name:
                            type: string
                            options: { default: null, length: 20 }
                        title:
                            type: string
                            options: { default: null, notnull: false, length: 255 }
                        description:
                            type: text
                            options: { default: null, length: 65532, notnull: false }
                        body:
                            type: text
                            options: { default: '', length: 65532, notnull: false }
                        starttime:
                            type: datetimetz
                            options: { default: null, notnull: false }
                        endtime:
                            type: datetimetz
                            options: { default: null, notnull: false }
                        created:
                            type: datetimetz
                            options: { default: null, notnull: false }
                        changed:
                            type: datetimetz
                            options: { default: null, notnull: false }
                        content_status:
                            type: integer
                            options: { default: '0', notnull: false, unsigned: true }
                        fk_author:
                            type: integer
                            options: { default: null, notnull: false, unsigned: true, comment: 'Clave foranea de user' }
                        fk_publisher:
                            type: integer
                            options: { default: null, notnull: false, unsigned: true, comment: 'Clave foranea de user' }
                        fk_user_last_editor:
                            type: integer
                            options: { default: null, notnull: false, unsigned: true, comment: 'Clave foranea de user' }
                        position:
                            type: integer
                            options: { default: '100', notnull: false, unsigned: true }
                        frontpage:
                            type: boolean
                            options: { default: '1', notnull: false }
                        in_litter:
                            type: boolean
                            options: { default: '0', notnull: false, comment: '0publicado 1papelera' }
                        in_home:
                            type: boolean
                            options: { default: '0', notnull: false }
                        slug:
                            type: string
                            options: { default: null, notnull: false, length: 255 }
                        available:
                            type: boolean
                            options: { default: '1', notnull: false }
                        with_comment:
                            type: boolean
                            options: { default: '1', notnull: false }
                        params:
                            type: text
                            options: { default: null, length: 65532, notnull: false }
                        favorite:
                            type: boolean
                            options: { default: null, notnull: false }
                        urn_source:
                            type: string
                            options: { default: null, notnull: false, length: 255 }
                    index:
                        -
                            name: PRIMARY
                            columns: [ pk_content ]
                            primary: true
                            unique: true
                            flags: {  }
                        -
                            name: fk_content_type
                            columns: [fk_content_type]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: in_litter
                            columns: [in_litter]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: content_status
                            columns: [content_status]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: in_home
                            columns: [in_home]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: frontpage
                            columns: [frontpage]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: available
                            columns: [available]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: starttime
                            columns: [starttime, endtime]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: endtime
                            columns: [endtime]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: created
                            columns: [created]
                            primary: false
                            unique: false
                            flags: {  }
                        -
                            name: urn_source
                            columns: [urn_source]
                        -
                            name: content_type_name_in_litter_content_status
                            columns: [content_type_name, in_litter, content_status]
                            primary: false
                            unique: false
                            flags: {  }
