instances:
    columns:
        id:
            type: bigint
            options: { default: null, autoincrement: true, unsigned: true }
        internal_name:
            type: string
            options: { default: null, length: 100 }
        name:
            type: string
            options: { default: null, length: 255 }
        domains:
            type: string
            options: { default: null, length: 500 }
        domain_expire:
            type: datetime
            options: { default: null, notnull: false }
        main_domain:
            type: string
            options: { default: null, length: 255 }
        created:
            type: datetime
            options: { default: null }
        last_login:
            type: datetime
            options: { default: null, notnull: false }
        settings:
            type: text
            options: { default: null, length: 65532, notnull: false }
        activated_modules:
            type: text
            options: { default: null, length: 65532, notnull: false }
        activated:
            type: boolean
            options: { default: null }
        contact_mail:
            type: string
            options: { default: null, length: 255 }
        country:
            type: string
            options: { default: null, length: 2 }
        owner_id:
            type: bigint
            options: { default: null, unsigned: true, notnull: false }
        contents:
            type: integer
            options: { default: 0, unsigned: true }
        attachments:
            type: integer
            options: { default: 0, unsigned: true }
        articles:
            type: integer
            options: { default: 0, unsigned: true }
        opinions:
            type: integer
            options: { default: 0, unsigned: true }
        advertisements:
            type: integer
            options: { default: 0, unsigned: true }
        albums:
            type: integer
            options: { default: 0, unsigned: true }
        letters:
            type: integer
            options: { default: 0, unsigned: true }
        polls:
            type: integer
            options: { default: 0, unsigned: true }
        photos:
            type: integer
            options: { default: 0, unsigned: true }
        videos:
            type: integer
            options: { default: 0, unsigned: true }
        widgets:
            type: integer
            options: { default: 0, unsigned: true }
        static_pages:
            type: integer
            options: { default: 0, unsigned: true }
        media_size:
            type: float
            options: { default: 0 }
        alexa:
            type: integer
            options: { default: null, unsigned: true }
        page_views:
            type: bigint
            options: { default: 0, unsigned: true }
        emails:
            type: integer
            options: { default: 0, unsigned: true }
        users:
            type: integer
            options: { default: 0, unsigned: true }
        comments:
            type: integer
            options: { default: 0, unsigned: true }
        kioskos:
            type: integer
            options: { default: 0, unsigned: true }
        events:
            type: integer
            options: { default: 0, unsigned: true }
        webpush_subscribers:
            type: integer
            options: { default: 0, unsigned: true }
    index:
        -
            name: PRIMARY
            columns: [ id ]
            primary: true
            unique: true
            flags: {  }
        -
            name: domain_name
            columns: [ domains ]
            primary: false
            unique: false
            flags: { fulltext: true }
instance_meta:
    columns:
        instance_id:
            type:    bigint
            options: { default: null, autoincrement: true, notnull: true, unsigned: true }
        meta_key:
            type: string
            options: { length: 255, notnull: false }
        meta_value:
            type:    text
            options: { default: null, length: 65532, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [ instance_id, meta_key ]
            primary: true
            unique: true
            flags: {  }
        -
            name: instance_id
            columns: [ instance_id ]
            primary: false
            unique: false
            flags: {  }
        -
            name: meta_key
            columns: [ meta_key ]
            primary: false
            unique: false
            flags: {  }
    foreign_keys:
        -
            name: instancemeta_id_instances_id
            source_field: [ instance_id ]
            target_table: instances
            target_field: [ id ]
            restrictions: { onUpdate: CASCADE, onDelete: CASCADE }
extension:
    columns:
        id:
            type: bigint
            options: { default: null, autoincrement: true }
        uuid:
            type:    string
            options: { default: null, length: 100, notnull: true }
        name:
            type: text
            options: { default: null, length: 65532, notnull: false }
        type:
            type:    string
            options: { default: null, length: 40 }
        author:
            type: string
            options: { default: null, length: 140, notnull: false }
        url:
            type: string
            options: { default: null, length: 140, notnull: false }
        description:
            type:    text
            options: { default: null, length: 65532, notnull: false }
        about:
            type:    text
            options: { default: null, length: 65532, notnull: false }
        images:
            type: text
            options: { default: null, length: 65532, notnull: false }
        created:
            type: datetime
            options: { default: null, notnull: false }
        updated:
            type: datetime
            options: { default: null, notnull: false }
        enabled:
            type: boolean
            options: { default: false }
    index:
        -
            name: PRIMARY
            columns: [ id ]
            primary: true
            unique: true
            flags: {  }
        -
            name: type
            columns: [ type ]
            primary: false
            unique: false
            flags: { }
        -
            name: uuid
            columns: [ uuid ]
            primary: false
            unique: true
            flags: { }
extension_meta:
    columns:
        extension_id:
            type:    bigint
            options: { default: null, notnull: true }
        meta_key:
            type: string
            options: { length: 255, notnull: false }
        meta_value:
            type:    text
            options: { default: null, length: 65532, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [ extension_id, meta_key ]
            primary: true
            unique: true
            flags: {  }
        -
            name: extension_id
            columns: [ extension_id ]
            primary: false
            unique: false
            flags: {  }
        -
            name: meta_key
            columns: [ meta_key ]
            primary: false
            unique: false
            flags: {  }
    foreign_keys:
        -
            name: extensionmeta_extensionid_extension_id
            source_field: [ extension_id ]
            target_table: extension
            target_field: [ id ]
            restrictions: { onUpdate: CASCADE, onDelete: CASCADE }

notification:
    columns:
        id:
            type:    integer
            options: { default: null, unsigned: true, autoincrement: true }
        title:
            type: text
            options: { default: null, length: 65532, notnull: false }
        body:
            type:    text
            options: { default: null, length: 65532, notnull: false }
        target:
            type: text
            options: { default: null, length: 65532, notnull: false }
        users:
            type: text
            options: { default: null, length: 65532, notnull: false }
        start:
            type: datetime
            options: { default: null, notnull: false }
        end:
            type: datetime
            options: { default: null, notnull: false }
        creator:
            type: string
            options: { default: '', length: 255, notnull: false }
        style:
            type: text
            options: { default: null, length: 65532, notnull: false }
        fixed:
            type: boolean
            options: { default: 0 }
        forced:
            type: boolean
            options: { default: 0 }
        enabled:
            type: boolean
            options: { default: 0 }
    index:
        -
            name: PRIMARY
            columns: [ id ]
            primary: true
            unique: true
            flags: {  }
settings:
    columns:
        name:
            type: string
            options: { default: '', length: 128 }
        value:
            type: text
            options: { default: null, length: 65532 }
    index:
        -
            name: PRIMARY
            columns: [ name ]
            primary: true
            unique: true
            flags: {  }
user_groups:
    columns:
        pk_user_group:
            type:    integer
            options: { unsigned: true, autoincrement: true }
        name:
            type:    string
            options: { length: 50, default: null, notnull: false }
        type:
            type:    integer
            options: { default: 0, notnull: true }
        private:
            type:    boolean
            options: { default: 0, notnull: true }
        request:
            type:    boolean
            options: { default: 0, notnull: true }
        enabled:
            type:    boolean
            options: { default: 0, notnull: true }
    index:
        -
            name: PRIMARY
            columns: [ pk_user_group ]
            primary: true
            unique: true
            flags: {  }
user_groups_privileges:
    columns:
        pk_fk_user_group:
            type: integer
            options: { unsigned: true, default: null }
        pk_fk_privilege:
            type: integer
            options: { unsigned: true, default: null }
    index:
        -
            name: PRIMARY
            columns: [ pk_fk_user_group, pk_fk_privilege ]
            primary: true
            unique: true
            flags: {  }
usermeta:
    columns:
        user_id:
            type:    integer
            options: { default: null, notnull: true, unsigned: true  }
        meta_key:
            type: string
            options: { length: 255 }
        meta_value:
            type: text
            options: { length: 65532, default: null, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [user_id, meta_key]
            primary: true
            unique: true
            flags: {  }
        -
            name: user_id
            columns: [user_id]
            primary: false
            unique: false
            flags: {  }
        -
            name: meta_key
            columns: [meta_key]
            primary: false
            unique: false
            flags: {  }
    foreign_keys:
        -
            name:         usermeta_user_id_users_id
            source_field: [ user_id ]
            target_table: users
            target_field: [ id ]
            restrictions: { onUpdate: CASCADE, onDelete: CASCADE }
users:
    columns:
        id:
            type:    integer
            options: { autoincrement: true, default: null, length: 20, unsigned: true, }
        username:
            type:    string
            options: { default: null, length: 100, notnull: false }
        password:
            type:    string
            options: { default: null, length: 50, notnull: false }
        url:
            type:    string
            options: { default: null, length: 255, notnull: false }
        bio:
            type:    text
            options: { default: null, length: 65532, notnull: false }
        avatar_img_id:
            type:    bigint
            options: { default: null, length: 20, notnull: false, unsigned: true }
        email:
            type:    string
            options: { default: null, length: 255, notnull: false }
        name:
            type:    string
            options: { default: null, length: 100, notnull: false }
        slug:
            type:    string
            options: { default: null, length: 100, notnull: false }
        type:
            type:    integer
            options: { comment: '0 backend - 1 frontend', default: 1, notnull: true, unsigned: true }
        token:
            type:    string
            options: { default: null, length: 32, notnull: false }
        activated:
            type:    integer
            options: { default: 0, notnull: true, unsigned: true }
    index:
        -
            name:    PRIMARY
            columns: [id]
            primary: true
            unique:  true
            flags:   {  }
        -
            name:    avatar_img_id
            columns: [avatar_img_id]
            primary: false
            unique:  false
            flags:   {  }
        -
            name:    user_username
            columns: [username]
            primary: false
            unique:  false
            flags:   {  }
        -
            name:    user_email
            columns: [email]
            primary: false
            unique:  false
            flags:   {  }
        -
            name:    user_slug
            columns: [slug]
            primary: false
            unique:  false
            flags:   {  }
        -
            name:    user_type
            columns: [type]
            primary: false
            unique:  false
            flags:   {  }
user_user_group:
    columns:
        user_id:
            type: integer
            options: { default: null, unsigned: true }
        user_group_id:
            type: integer
            options: { default: null, unsigned: true }
        status:
            type: integer
            options: { default: 1, notnull: true, comment: '0 rejected - 1 accepted - 2 requested' }
        expires:
            type: datetime
            options: { default: null, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [ user_id, user_group_id ]
            primary: true
            unique: true
            flags: {  }
    foreign_keys:
        -
            name: user_id_id
            source_field: [ user_id ]
            target_table: users
            target_field: [ id ]
            restrictions: { onUpdate: CASCADE, onDelete: CASCADE }
        -
            name: user_group_id_pk_user_group
            source_field: [ user_group_id ]
            target_table: user_groups
            target_field: [ pk_user_group ]
            restrictions: { onUpdate: CASCADE, onDelete: CASCADE }
client:
    columns:
        id:
            type: bigint
            options: { default: null }
        first_name:
            type: string
            options: { default: null, length: 100 }
        last_name:
            type: string
            options: { default: null, length: 100 }
        email:
            type: string
            options: { default: null, length: 255 }
        company:
            type: string
            options: { default: null, length: 100, notnull: false }
        owner_id:
            type: integer
            options: { default: null, unsigned: true, notnull: false }
        phone:
            type: string
            options: { default: null, length: 50, notnull: false }
        vat_number:
            type: string
            options: { default: null, length: 20, notnull: false }
        address:
            type: string
            options: { default: null, length: 255 }
        postal_code:
            type: string
            options: { default: null, length: 20 }
        city:
            type: string
            options: { default: null, length: 100 }
        state:
            type: string
            options: { default: null, length: 100 }
        country:
            type: string
            options: { default: null, length: 2 }
    index:
        -
            name: PRIMARY
            columns: [ id ]
            primary: true
            unique: true
            flags: {  }
        -
            name: email
            columns: [ email ]
            primary: false
            unique: true
            flags: {  }

purchase:
    columns:
        id:
            type: bigint
            options: { default: null, autoincrement: true }
        client:
            type: text
            options: { default: null, length: 65532, notnull: false }
        details:
            type: text
            options: { default: null, length: 65532, notnull: false }
        method:
            type: string
            options: { default: null, length: 15, notnull: false }
        fee:
            type: float
            options: { default: 0, notnull: true }
        total:
            type: float
            options: { default: 0, notnull: true }
        step:
            type: string
            options: { default: '', length: 10, notnull: true }
        instance_id:
            type: bigint
            options: { notnull: true }
        client_id:
            type: string
            options: { default: null, length: 60, notnull: false }
        payment_id:
            type: string
            options: { default: null, length: 60, notnull: false }
        invoice_id:
            type: string
            options: { default: null, length: 60, notnull: false }
        created:
            type: datetime
            options: { default: null, notnull: true }
        updated:
            type: datetime
            options: { default: null, notnull: false }
        notes:
            type: text
            options: { default: null, length: 65532, notnull: false }
        terms:
            type: text
            options: { default: null, length: 65532, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [ id ]
            primary: true
            unique: true
            flags: {  }
        -
            name: client_id
            columns: [ client_id ]
            primary: false
            unique: false
            flags: { fulltext: true }

user_notification:
    columns:
        instance_id:
            type: integer
            options: { default: null, unsigned: true }
        user_id:
            type: integer
            options: { default: null, unsigned: true }
        notification_id:
            type: integer
            options: { default: null, unsigned: true }
        user:
            type: text
            options: { default: null, length: 65532, notnull: true }
        read_date:
            type: datetime
            options: { default: null, notnull: false }
        view_date:
            type: datetime
            options: { default: null, notnull: false }
        click_date:
            type: datetime
            options: { default: null, notnull: false }
        open_date:
            type: datetime
            options: { default: null, notnull: false }
    index:
        -
            name: PRIMARY
            columns: [notification_id, instance_id, user_id]
            primary: true
            unique: true
            flags: {  }
